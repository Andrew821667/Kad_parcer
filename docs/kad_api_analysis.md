# –ê–Ω–∞–ª–∏–∑ API –ö–ê–î –ê—Ä–±–∏—Ç—Ä

## üéØ –†–µ–∞–ª—å–Ω—ã–π API –∑–∞–ø—Ä–æ—Å (–ø–æ–ª—É—á–µ–Ω –∏–∑ DevTools)

### Endpoint: SearchInstances

**URL:** `https://kad.arbitr.ru/Kad/SearchInstances`

**Method:** POST

**Content-Type:** application/json

### –ó–∞–≥–æ–ª–æ–≤–∫–∏ (–∫—Ä–∏—Ç–∏—á–Ω—ã–µ)

```
x-date-format: iso              ‚Üê –í–ê–ñ–ù–û! –§–æ—Ä–º–∞—Ç –¥–∞—Ç –≤ –æ—Ç–≤–µ—Ç–µ
x-requested-with: XMLHttpRequest ‚Üê –í–ê–ñ–ù–û! –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è AJAX –∑–∞–ø—Ä–æ—Å–∞
accept: */*
content-type: application/json
```

### –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON)

```json
{
  "Page": 1,
  "Count": 25,
  "Courts": [],
  "DateFrom": null,
  "DateTo": null,
  "Sides": [],
  "Judges": [],
  "CaseNumbers": ["A54-927/2025"],
  "WithVKSInstances": false
}
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|------|-----|----------|--------|
| `Page` | int | –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–∞–≥–∏–Ω–∞—Ü–∏—è) | 1 |
| `Count` | int | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ | 25 |
| `Courts` | array | –°–ø–∏—Å–æ–∫ –∫–æ–¥–æ–≤ —Å—É–¥–æ–≤ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ | `["–ê40", "–§05"]` |
| `DateFrom` | string/null | –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –ø–µ—Ä–∏–æ–¥–∞ (ISO 8601) | `"2024-01-01"` |
| `DateTo` | string/null | –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–µ—Ä–∏–æ–¥–∞ (ISO 8601) | `"2024-12-31"` |
| `Sides` | array | –£—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–ª–∞ (–∏—Å—Ç–µ—Ü/–æ—Ç–≤–µ—Ç—á–∏–∫) | `[{"Name": "–û–û–û", "Type": null, "ExactMatch": false}]` |
| `Judges` | array | –°—É–¥—å–∏ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ | `["–ò–≤–∞–Ω–æ–≤"]` |
| `CaseNumbers` | array | –ù–æ–º–µ—Ä–∞ –¥–µ–ª –¥–ª—è –ø–æ–∏—Å–∫–∞ | `["–ê54-927/2025"]` |
| `WithVKSInstances` | bool | –í–∫–ª—é—á–∞—Ç—å –¥–µ–ª–∞ —Å –í–ö–°? | false |

### –ù–∞–π–¥–µ–Ω–Ω–æ–µ –¥–µ–ª–æ

**–ù–æ–º–µ—Ä:** –ê54-927/2025
**–°—É–¥:** –ê—Ä–±–∏—Ç—Ä–∞–∂–Ω—ã–π —Å—É–¥ –†—è–∑–∞–Ω—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏
**–ì–æ–¥:** 2025 (—Å–≤–µ–∂–µ–µ –¥–µ–ª–æ!)

---

## ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–ª—è –Ω–∞—à–µ–≥–æ –∫–æ–¥–∞

### 1. Endpoint –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
–ù–∞—à –∫–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `/Kad/SearchInstances` ‚úÖ

### 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø—Ä–æ—Å–∞ —Å–æ–≤–ø–∞–¥–∞–µ—Ç
```python
# src/scraper/kad_client.py:198-228
payload: dict[str, Any] = {
    "Page": page,
    "Count": count,
}

if case_number:
    payload["CaseNumbers"] = case_number  # ‚Üê –ò–°–ü–†–ê–í–ò–¢–¨! –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –ú–ê–°–°–ò–í

if participant_name:
    payload["Sides"] = [
        {
            "Name": participant_name,
            "Type": None,
            "ExactMatch": False,
        }
    ]
```

### 3. –ü—Ä–æ–±–ª–µ–º—ã –≤ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**üî¥ –ö–†–ò–¢–ò–ß–ù–û - –û—à–∏–±–∫–∞ –≤ kad_client.py:**

```python
# –¢–ï–ö–£–©–ò–ô –ö–û–î (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û):
if case_number:
    payload["CaseNumbers"] = case_number  # –°—Ç—Ä–æ–∫–∞!

# –î–û–õ–ñ–ù–û –ë–´–¢–¨:
if case_number:
    payload["CaseNumbers"] = [case_number]  # –ú–∞—Å—Å–∏–≤!
```

**‚ö†Ô∏è –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏:**

```python
# src/scraper/kad_client.py:56-63
headers={
    "User-Agent": settings.scraper_user_agent,
    "Accept": "*/*",
    "Content-Type": "application/json",
    "x-date-format": "iso",  # ‚Üê –î–û–ë–ê–í–ò–¢–¨!
    "X-Requested-With": "XMLHttpRequest",  # –£–ñ–ï –ï–°–¢–¨ ‚úÖ
}
```

---

## üîç –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞ (–ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º–∞—è)

–û—Å–Ω–æ–≤—ã–≤–∞—è—Å—å –Ω–∞ –∫–æ–¥–µ –ø–∞—Ä—Å–µ—Ä–∞:

```json
{
  "Result": {
    "TotalCount": 1,
    "Items": [
      {
        "CaseId": "12345678-90ab-cdef-1234-567890abcdef",
        "CaseNumber": "–ê54-927/2025",
        "CourtName": "–ê—Ä–±–∏—Ç—Ä–∞–∂–Ω—ã–π —Å—É–¥ –†—è–∑–∞–Ω—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏",
        "Judge": "–ò–≤–∞–Ω–æ–≤ –ò.–ò.",
        "FilingDate": "2025-01-15",
        "Status": "–í –ø—Ä–æ—Ü–µ—Å—Å–µ",
        "Category": "–≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ —Å–ø–æ—Ä—ã",
        // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
      }
    ]
  }
}
```

**–ù—É–∂–Ω–æ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å!** - –í—ã–ø–æ–ª–Ω–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∏ –∏–∑—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç.

---

## üîê –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏

### Cookies –≤ –∑–∞–ø—Ä–æ—Å–µ

–ó–∞–ø—Ä–æ—Å —Å–æ–¥–µ—Ä–∂–∏—Ç –º–Ω–æ–≥–æ cookies:
```
.ASPXAUTH=...           ‚Üê ASP.NET –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
ASP.NET_SessionId=...   ‚Üê ID —Å–µ—Å—Å–∏–∏
is_agree_privacy_policy=true
wasm=...
```

**–í–æ–ø—Ä–æ—Å—ã:**
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –ª–∏ cookies –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤?
- –ú–æ–∂–Ω–æ –ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ —Å–µ—Å—Å–∏–∏?
- –ù—É–∂–Ω–∞ –ª–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è?

**–¢–µ—Å—Ç:** –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å –ë–ï–ó cookies ‚Üí –µ—Å–ª–∏ 403/401, —Ç–æ –Ω—É–∂–Ω–∞ —Å–µ—Å—Å–∏—è.

---

## üß™ –ü–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API

### –¢–µ—Å—Ç 1: –ë–∞–∑–æ–≤—ã–π –ø–æ–∏—Å–∫ –ø–æ –Ω–æ–º–µ—Ä—É –¥–µ–ª–∞

```bash
curl -X POST 'https://kad.arbitr.ru/Kad/SearchInstances' \
  -H 'Content-Type: application/json' \
  -H 'x-date-format: iso' \
  -H 'X-Requested-With: XMLHttpRequest' \
  -d '{
    "Page": 1,
    "Count": 25,
    "CaseNumbers": ["–ê54-927/2025"]
  }'
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- 200 OK
- JSON —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –¥–µ–ª–µ

### –¢–µ—Å—Ç 2: –ü–æ–∏—Å–∫ –ø–æ —Å—É–¥—É –∏ –¥–∞—Ç–µ

```bash
curl -X POST 'https://kad.arbitr.ru/Kad/SearchInstances' \
  -H 'Content-Type: application/json' \
  -H 'x-date-format: iso' \
  -H 'X-Requested-With: XMLHttpRequest' \
  -d '{
    "Page": 1,
    "Count": 25,
    "Courts": ["–ê40"],
    "DateFrom": "2024-12-01",
    "DateTo": "2024-12-31"
  }'
```

**–¶–µ–ª—å:** –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–µ–ª –ê–° –ú–æ—Å–∫–≤—ã –∑–∞ –¥–µ–∫–∞–±—Ä—å 2024.

### –¢–µ—Å—Ç 3: –ú–∞—Å—Å–æ–≤—ã–π –ø–æ–∏—Å–∫ (–ø–∞–≥–∏–Ω–∞—Ü–∏—è)

```bash
# –°—Ç—Ä–∞–Ω–∏—Ü–∞ 1
curl ... -d '{"Page": 1, "Count": 100, ...}'

# –°—Ç—Ä–∞–Ω–∏—Ü–∞ 2
curl ... -d '{"Page": 2, "Count": 100, ...}'
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π `Count` (—Å–∫–æ–ª—å–∫–æ –º–æ–∂–Ω–æ –∑–∞–ø—Ä–æ—Å–∏—Ç—å –∑–∞ —Ä–∞–∑?)
- –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –ø–∞–≥–∏–Ω–∞—Ü–∏—è?

---

## üìù TODO: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –±–∞–≥ –≤ kad_client.py

```python
# src/scraper/kad_client.py:203-204
# –ë–´–õ–û:
if case_number:
    payload["CaseNumbers"] = case_number

# –°–¢–ê–õ–û:
if case_number:
    payload["CaseNumbers"] = [case_number] if isinstance(case_number, str) else case_number
```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ x-date-format

```python
# src/scraper/kad_client.py:60
"x-date-format": "iso",
```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ cookies

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ API –±–µ–∑ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏—è–º–∏.

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4: –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

```python
async def search_by_court_and_date(
    self,
    court_code: str,
    date_from: str,
    date_to: str,
    page: int = 1,
    count: int = 100
) -> dict:
    """–ü–æ–∏—Å–∫ –¥–µ–ª –ø–æ —Å—É–¥—É –∏ –¥–∏–∞–ø–∞–∑–æ–Ω—É –¥–∞—Ç."""
    payload = {
        "Page": page,
        "Count": count,
        "Courts": [court_code],
        "DateFrom": date_from,
        "DateTo": date_to,
    }

    response = await self._request_with_retry(
        "POST",
        "/Kad/SearchInstances",
        json=payload,
    )

    return response.json()
```

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –±–∞–≥** —Å CaseNumbers (–º–∞—Å—Å–∏–≤ –≤–º–µ—Å—Ç–æ —Å—Ç—Ä–æ–∫–∏)
2. **–î–æ–±–∞–≤–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫** x-date-format
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API** —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏
4. **–ò–∑—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç API** (—Å—Ç—Ä—É–∫—Ç—É—Ä—É JSON)
5. **–ü–æ–ª—É—á–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É –¥–µ–ª–∞** (endpoint `/Card/{CaseId}`)
6. **–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å HTML** –∫–∞—Ä—Ç–æ—á–∫–∏ –¥–µ–ª–∞

---

## üìä –í—ã–≤–æ–¥—ã

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
- Endpoint –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø—Ä–æ—Å–∞ —Å–æ–≤–ø–∞–¥–∞–µ—Ç
- –ó–∞–≥–æ–ª–æ–≤–∫–∏ –≤ —Ü–µ–ª–æ–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ

### ‚ö†Ô∏è –ß—Ç–æ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å
- CaseNumbers –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–∞—Å—Å–∏–≤–æ–º
- –î–æ–±–∞–≤–∏—Ç—å x-date-format –∑–∞–≥–æ–ª–æ–≤–æ–∫
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å cookies

### ‚ùì –ß—Ç–æ –Ω—É–∂–Ω–æ –≤—ã—è—Å–Ω–∏—Ç—å
- –ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞ API
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è Count –∏ Page
- –ö–æ–¥—ã —Å—É–¥–æ–≤ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (–ê40, –§05, –∏ —Ç.–¥.)
- Endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏ –¥–µ–ª–∞
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ HTML –∫–∞—Ä—Ç–æ—á–∫–∏ –¥–µ–ª–∞
